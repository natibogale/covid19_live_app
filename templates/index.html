<html>
  <head>
    <title>Covid-19 Live Data</title>
    <link
      rel="shortcut icon"
      href="https://png.pngtree.com/png-clipart/20200727/original/pngtree-prohibit-viral-pneumonia-spread-phrase-svg-png-image_5362020.jpg"
      type="image/x-icon"
    />
    <link
      href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      rel="stylesheet"
      id="bootstrap-css"
    />

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css"
      rel="stylesheet"
    />
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>


  </head>
  <body style="background-color: #0a192f">
    <div class="container">
      <div class="row-fluid" style="padding-top: 7%; text-align: center">
        <h1
          style="
            color: white;
            text-align: center;
            padding-bottom: 30px;
            font-size: 50px;
            font-weight: lighter;
          "
        >
          <span style="color: red">COVID-19</span> WORLDWIDE LIVE DATA
        </h1>
        <div class="container mt-50" style="margin-bottom: 5%">
          <div class="row">
            <div class="col-md-4"></div>
            <form class="col-md-4" method="post" action="">
              {% csrf_token %}
              <select
                class="form-control select2 selectpicker"
                id="select"
                onchange="loadDoc()"
                name="selectedCountry"
              >
                <option value="">Select Countries...</option>
                {% for country in lists %}
                <option value="{{country}}">{{country}}</option>
                {% endfor %}
              </select>
            </form>
            <div class="col-md-4"></div>
          </div>
        </div>
        <script>
          $(".select2").select2();
        </script>

        <h1
          style="color: white; text-align: center; margin-bottom: 3%"
          id="selectedCountry"
        ></h1>

        <div
          style="margin-bottom: 5%"
          class="d-flex justify-content-center align-items-center"
        >
          <div
            class="container"
            style="
              border-radius: 10px;
              background-color: orange;
              height: 100px;
              width: 200px;
            "
          >
            <h1 style="text-align: center" id="total">0</h1>
            <p style="text-align: center">total cases</p>
          </div>
          <div
            class="container"
            style="
              border-radius: 10px;
              background-color: green;
              height: 100px;
              width: 200px;
            "
          >
            <h1 style="text-align: center" id="recovered">0</h1>
            <p style="text-align: center">recovered</p>
          </div>
          <div
            class="container"
            style="
              border-radius: 10px;
              background-color: yellow;
              height: 100px;
              width: 200px;
            "
          >
            <h1 style="text-align: center" id="active">0</h1>
            <p style="text-align: center">active</p>
          </div>
        </div>

        <div class="d-flex justify-content-center align-items-center">
          <div
            class="container"
            style="
              border-radius: 10px;
              background-color: skyblue;
              height: 100px;
              width: 200px;
            "
          >
            <h1 style="text-align: center" id="new">0</h1>
            <p style="text-align: center">new cases</p>
          </div>
          <div
            class="container"
            style="
              border-radius: 10px;
              background-color: grey;
              height: 100px;
              width: 200px;
            "
          >
            <h1 style="text-align: center" id="deaths">0</h1>
            <p style="text-align: center">deaths</p>
          </div>
          <div
            class="container"
            style="
              border-radius: 10px;
              background-color: red;
              height: 100px;
              width: 200px;
            "
          >
            <h1 style="text-align: center" id="critical">0</h1>
            <p style="text-align: center">critical cases</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      function loadDoc() {
        selectedCountry = document.getElementById("select").value;
        $.ajax({
          method: "POST",
          url: "/",
          data: {
            selectedCountry,
            csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val(),
          },
          success: function (data) {
            if (data) {
              document.getElementById("new").innerText = data.new;
              document.getElementById("active").innerText = data.active;
              document.getElementById("critical").innerText = data.critical;
              document.getElementById("recovered").innerText = data.recovered;
              document.getElementById("total").innerText = data.total;
              document.getElementById("deaths").innerText = data.deaths;
              document.getElementById("selectedCountry").innerText =
                data.selectedCountry;
            }
          },
        });
      }
    </script>

    <footer>
      <p style="margin-top: 130px; color: grey; text-align: center">
        2020 Developed By <span style="color: white">Nathanael Bogale</span> 
      </p>
    </footer>

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


  </body>
</html>
